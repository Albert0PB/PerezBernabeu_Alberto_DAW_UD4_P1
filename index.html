<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>My Docs</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/fontawesome.min.css" rel="stylesheet">
        <link href="css/brands.min.css" rel="stylesheet">
        <link href="css/solid.min.css" rel="stylesheet">
        <link href="css/v4-font-face.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body class="homepage">
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href=".">My Docs</a>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#practica-41-configuracion-de-un-servidor-dns" class="nav-link">Práctica 4.1 - Configuración de un servidor DNS</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#instalacion-del-servidor-dns" class="nav-link">Instalación del servidor DNS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#configuracion-del-servidor" class="nav-link">Configuración del servidor</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#cuestiones-finales" class="nav-link">Cuestiones finales</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="practica-41-configuracion-de-un-servidor-dns">Práctica 4.1 - Configuración de un servidor DNS</h1>
<h2 id="instalacion-del-servidor-dns">Instalación del servidor DNS</h2>
<p>Para configurar un servidor DNS, instalaremos los paquetes de Bind9, 
que es el servidor DNS más extendido y ampliamente utilizado. Ejecutamos el siguiente 
comando:</p>
<pre><code class="language-console">sudo apt-get install bind9 bind9utils bind9-doc
</code></pre>
<h2 id="configuracion-del-servidor">Configuración del servidor</h2>
<p>En primer lugar le indicaremos al servidor que vamos a trabajar únicamente con IPv4, 
por lo que modificamos el archivo de configuración 'named':</p>
<pre><code class="language-console">sudo nano /etc/default/named
</code></pre>
<p>Y la línea que comienza por 'OPTIONS' debe quedar de la siguiente manera:</p>
<pre><code class="language-console">OPTIONS=&quot;-u bind -4&quot;
</code></pre>
<h3 id="configuracion-del-archivo-namedconfoptions">Configuración del archivo 'named.conf.options'</h3>
<p>Antes de modificar archivos de configuración sensibles, realizamos una copia de seguridad 
con el comando: </p>
<pre><code class="language-console">sudo cp /etc/bind/named.conf.options /etc/bind/named.conf.options.backup
</code></pre>
<p>Ahora podemos modificarlo para que sólo se puedan hacer consultas al servidor desde 
otras máquinas de la red local. Para ello, añadimos un bloque al principio del archivo 
tal que:</p>
<pre><code class="language-console">acl confiables {
    192.168.0.0/24;     # Red local
};
</code></pre>
<p>Y también comentamos la línea que dice "listen-on-v6 { any; };", ya que sólo vamos a 
trabajar con IPv4.</p>
<p>Comprobamos que la configuración es correcta con: </p>
<pre><code class="language-console">sudo named-checkconf
</code></pre>
<p>Reiniciamos y comprobamos el estado del servicio: </p>
<pre><code class="language-console">sudo systemctl restart named
sudo systemctl status named
</code></pre>
<p>Si 'named-checkconf' no ha indicado ningún problema y el servicio se encuentra en 
ejecución, podemos continuar.</p>
<h3 id="configuracion-del-archivo-namedconflocal">Configuración del archivo 'named.conf.local'</h3>
<p>Ejecutamos:</p>
<pre><code class="language-console">sudo nano /etc/bind/named.conf.local
</code></pre>
<p>Y, después del texto comentado, incluimos un bloque tal que:</p>
<pre><code class="language-console">zone &quot;deaw.es&quot; {
    type master;
    file &quot;/etc/bind/db.deaw.es&quot;;
};
</code></pre>
<h3 id="creacion-del-archivo-de-zona">Creación del archivo de zona</h3>
<p>Ahora crearemos el archivo con ruta y nombre que hemos indicado en el archivo de 
configuración anterior. En este caso:</p>
<pre><code class="language-console">sudo nano /etc/bind/db.deaw.es
</code></pre>
<p>Y su contenido será: </p>
<pre><code class="language-console">$TTL 604800
@       IN      SOA     debian.deaw.es admin.deaw.es (
        2025011601 ;Serial
        3600       ;Refresh
        1800       ;Retry
        604800     ;Expire
        86400      ;Minimum TTL
    )

    IN NS debian.deaw.es.

debian IN A 192.168.0.19

</code></pre>
<h3 id="creacion-del-archivo-de-zona-para-resolucion-inversa">Creación del archivo de zona para resolución inversa</h3>
<p>Volvemos a modificar /etc/bind/named.conf.local y añadimos:</p>
<pre><code class="language-console">zone &quot;0.168.192.in-addr.arpa&quot; {
    type master;
    file &quot;/etc/bind/db.0.168.192&quot;;
};
</code></pre>
<p>Y, al igual que en los pasos anteriores, creamos ese archivo con el contenido: </p>
<pre><code class="language-console">$TTL 604800
@       IN      SOA     debian.deaw.es admin.deaw.es (
        2025011601 ;Serial
        3600       ;Refresh
        1800       ;Retry
        604800     ;Expire
        86400      ;Minimum TTL
    )

    IN NS debian.deaw.es.

X IN PTR debian
</code></pre>
<h3 id="comprobacion-de-las-configuraciones">Comprobación de las configuraciones</h3>
<p>Para asegurarnos de que las modificaciones y los archivos que hemos creado son correctos 
y que todo funciona correctamente, ejecutamos los siguientes comandos (en caso de que 
no haya problemas, indicarán 'OK'. En otro caso, darán información sobre el problema 
encontrado):</p>
<p><img alt="Comprobaciones" src="images/comprobaciones.png" /></p>
<h2 id="cuestiones-finales">Cuestiones finales</h2>
<ul>
<li>¿Qué pasará si un cliente de una red diferente a la tuya intenta hacer uso de tu DNS de alguna manera, le funcionará?¿Por qué, en qué parte de la configuración puede verse?</li>
</ul>
<p>En el caso del servidor de esta práctica, el cliente de otra red no podrá acceder ya que 
en el archivo 'named.conf.options' indicamos que sólo clientes de nuestra red local podrán 
realizar peticiones a nuestro servidor DNS.</p>
<ul>
<li>¿Por qué tenemos que permitir las consultas recursivas en la configuración?</li>
</ul>
<p>Las consultas recursivas permiten que el servidor DNS resuelva nombres de dominio que no están directamente en su zona. Sin esta opción, el servidor solo respondería a consultas sobre dominios para los que es autoritativo y no buscaría información fuera de su base de datos, lo que limita su funcionalidad.</p>
<ul>
<li>El servidor DNS que acabáis de montar, ¿es autoritativo? ¿Por qué?</li>
</ul>
<p>Sí, ya que posee archivos de zona para un dominio específico. </p>
<ul>
<li>¿Dónde podemos encontrar la directiva $ORIGIN y para qué sirve?</li>
</ul>
<p>Esta directiva se encuentra en los archivos de zona y sirve para que los registros puedan 
escribirse de manera relativa a esa directiva, sin necesidad de especificar el nombre 
de dominio completo en cada uno.</p>
<ul>
<li>¿Una zona es idéntico a un dominio?</li>
</ul>
<p>No, una zona no es idéntica a un dominio, aunque están relacionados. Una zona es una porción de un dominio DNS que está bajo la administración de un servidor DNS específico, y puede incluir varios subdominios. Un dominio, por otro lado, es un nombre en el sistema de nombres de dominio (DNS).</p>
<ul>
<li>¿Pueden editarse los archivos de zona de un servidor esclavo/secundario?</li>
</ul>
<p>No, los archivos de zona de un servidor esclavo no deben ser editados manualmente. Un servidor esclavo recibe sus archivos de zona del servidor primario (maestro) y se actualiza automáticamente con los cambios.</p>
<ul>
<li>¿Por qué podría querer tener más de un servidor esclavo para una misma zona?</li>
</ul>
<p>ener múltiples servidores esclavos mejora la fiabilidad y la disponibilidad del servicio DNS. Si uno de los servidores esclavos falla, otros pueden seguir proporcionando las respuestas. </p>
<ul>
<li>¿Cuántos servidores raíz existen?</li>
</ul>
<p>Existen 13 servidores raíz en el sistema DNS global. Estos servidores están distribuidos por todo el mundo y son responsables de redirigir las consultas DNS a los servidores de nombres autoritativos correspondientes.</p>
<ul>
<li>¿Qué es una consulta iterativa de referencia?</li>
</ul>
<p>Una consulta iterativa de referencia es un tipo de consulta DNS en la que, si un servidor DNS no tiene la respuesta a la consulta, devuelve la dirección de otro servidor DNS que podría tener la respuesta. El cliente luego consulta este servidor y repite el proceso hasta que se encuentra la respuesta.</p>
<ul>
<li>En una resolución inversa, ¿a qué nombre se mapearía la dirección IP 172.16.34.56?</li>
</ul>
<p>En una resolución inversa, la dirección IP 172.16.34.56 se mapearía al nombre 56.34.16.172.in-addr.arpa. Esto se debe a que en las consultas inversas, las direcciones IP se invierten y se añaden al dominio especial in-addr.arpa.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js"></script>
        <script src="search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.6.1
Build Date UTC : 2025-01-17 22:52:13.236412+00:00
-->
