{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Pr\u00e1ctica 4.1 - Configuraci\u00f3n de un servidor DNS Instalaci\u00f3n del servidor DNS Para configurar un servidor DNS, instalaremos los paquetes de Bind9, que es el servidor DNS m\u00e1s extendido y ampliamente utilizado. Ejecutamos el siguiente comando: sudo apt-get install bind9 bind9utils bind9-doc Configuraci\u00f3n del servidor En primer lugar le indicaremos al servidor que vamos a trabajar \u00fanicamente con IPv4, por lo que modificamos el archivo de configuraci\u00f3n 'named': sudo nano /etc/default/named Y la l\u00ednea que comienza por 'OPTIONS' debe quedar de la siguiente manera: OPTIONS=\"-u bind -4\" Configuraci\u00f3n del archivo 'named.conf.options' Antes de modificar archivos de configuraci\u00f3n sensibles, realizamos una copia de seguridad con el comando: sudo cp /etc/bind/named.conf.options /etc/bind/named.conf.options.backup Ahora podemos modificarlo para que s\u00f3lo se puedan hacer consultas al servidor desde otras m\u00e1quinas de la red local. Para ello, a\u00f1adimos un bloque al principio del archivo tal que: acl confiables { 192.168.0.0/24; # Red local }; Y tambi\u00e9n comentamos la l\u00ednea que dice \"listen-on-v6 { any; };\", ya que s\u00f3lo vamos a trabajar con IPv4. Comprobamos que la configuraci\u00f3n es correcta con: sudo named-checkconf Reiniciamos y comprobamos el estado del servicio: sudo systemctl restart named sudo systemctl status named Si 'named-checkconf' no ha indicado ning\u00fan problema y el servicio se encuentra en ejecuci\u00f3n, podemos continuar. Configuraci\u00f3n del archivo 'named.conf.local' Ejecutamos: sudo nano /etc/bind/named.conf.local Y, despu\u00e9s del texto comentado, incluimos un bloque tal que: zone \"deaw.es\" { type master; file \"/etc/bind/db.deaw.es\"; }; Creaci\u00f3n del archivo de zona Ahora crearemos el archivo con ruta y nombre que hemos indicado en el archivo de configuraci\u00f3n anterior. En este caso: sudo nano /etc/bind/db.deaw.es Y su contenido ser\u00e1: $TTL 604800 @ IN SOA debian.deaw.es admin.deaw.es ( 2025011601 ;Serial 3600 ;Refresh 1800 ;Retry 604800 ;Expire 86400 ;Minimum TTL ) IN NS debian.deaw.es. debian IN A 192.168.0.19 Creaci\u00f3n del archivo de zona para resoluci\u00f3n inversa Volvemos a modificar /etc/bind/named.conf.local y a\u00f1adimos: zone \"0.168.192.in-addr.arpa\" { type master; file \"/etc/bind/db.0.168.192\"; }; Y, al igual que en los pasos anteriores, creamos ese archivo con el contenido: $TTL 604800 @ IN SOA debian.deaw.es admin.deaw.es ( 2025011601 ;Serial 3600 ;Refresh 1800 ;Retry 604800 ;Expire 86400 ;Minimum TTL ) IN NS debian.deaw.es. X IN PTR debian Comprobaci\u00f3n de las configuraciones Para asegurarnos de que las modificaciones y los archivos que hemos creado son correctos y que todo funciona correctamente, ejecutamos los siguientes comandos (en caso de que no haya problemas, indicar\u00e1n 'OK'. En otro caso, dar\u00e1n informaci\u00f3n sobre el problema encontrado): Cuestiones finales \u00bfQu\u00e9 pasar\u00e1 si un cliente de una red diferente a la tuya intenta hacer uso de tu DNS de alguna manera, le funcionar\u00e1?\u00bfPor qu\u00e9, en qu\u00e9 parte de la configuraci\u00f3n puede verse? En el caso del servidor de esta pr\u00e1ctica, el cliente de otra red no podr\u00e1 acceder ya que en el archivo 'named.conf.options' indicamos que s\u00f3lo clientes de nuestra red local podr\u00e1n realizar peticiones a nuestro servidor DNS. \u00bfPor qu\u00e9 tenemos que permitir las consultas recursivas en la configuraci\u00f3n? Las consultas recursivas permiten que el servidor DNS resuelva nombres de dominio que no est\u00e1n directamente en su zona. Sin esta opci\u00f3n, el servidor solo responder\u00eda a consultas sobre dominios para los que es autoritativo y no buscar\u00eda informaci\u00f3n fuera de su base de datos, lo que limita su funcionalidad. El servidor DNS que acab\u00e1is de montar, \u00bfes autoritativo? \u00bfPor qu\u00e9? S\u00ed, ya que posee archivos de zona para un dominio espec\u00edfico. \u00bfD\u00f3nde podemos encontrar la directiva $ORIGIN y para qu\u00e9 sirve? Esta directiva se encuentra en los archivos de zona y sirve para que los registros puedan escribirse de manera relativa a esa directiva, sin necesidad de especificar el nombre de dominio completo en cada uno. \u00bfUna zona es id\u00e9ntico a un dominio? No, una zona no es id\u00e9ntica a un dominio, aunque est\u00e1n relacionados. Una zona es una porci\u00f3n de un dominio DNS que est\u00e1 bajo la administraci\u00f3n de un servidor DNS espec\u00edfico, y puede incluir varios subdominios. Un dominio, por otro lado, es un nombre en el sistema de nombres de dominio (DNS). \u00bfPueden editarse los archivos de zona de un servidor esclavo/secundario? No, los archivos de zona de un servidor esclavo no deben ser editados manualmente. Un servidor esclavo recibe sus archivos de zona del servidor primario (maestro) y se actualiza autom\u00e1ticamente con los cambios. \u00bfPor qu\u00e9 podr\u00eda querer tener m\u00e1s de un servidor esclavo para una misma zona? ener m\u00faltiples servidores esclavos mejora la fiabilidad y la disponibilidad del servicio DNS. Si uno de los servidores esclavos falla, otros pueden seguir proporcionando las respuestas. \u00bfCu\u00e1ntos servidores ra\u00edz existen? Existen 13 servidores ra\u00edz en el sistema DNS global. Estos servidores est\u00e1n distribuidos por todo el mundo y son responsables de redirigir las consultas DNS a los servidores de nombres autoritativos correspondientes. \u00bfQu\u00e9 es una consulta iterativa de referencia? Una consulta iterativa de referencia es un tipo de consulta DNS en la que, si un servidor DNS no tiene la respuesta a la consulta, devuelve la direcci\u00f3n de otro servidor DNS que podr\u00eda tener la respuesta. El cliente luego consulta este servidor y repite el proceso hasta que se encuentra la respuesta. En una resoluci\u00f3n inversa, \u00bfa qu\u00e9 nombre se mapear\u00eda la direcci\u00f3n IP 172.16.34.56? En una resoluci\u00f3n inversa, la direcci\u00f3n IP 172.16.34.56 se mapear\u00eda al nombre 56.34.16.172.in-addr.arpa. Esto se debe a que en las consultas inversas, las direcciones IP se invierten y se a\u00f1aden al dominio especial in-addr.arpa.","title":"Pr\u00e1ctica 4.1 - Configuraci\u00f3n de un servidor DNS"},{"location":"#practica-41-configuracion-de-un-servidor-dns","text":"","title":"Pr\u00e1ctica 4.1 - Configuraci\u00f3n de un servidor DNS"},{"location":"#instalacion-del-servidor-dns","text":"Para configurar un servidor DNS, instalaremos los paquetes de Bind9, que es el servidor DNS m\u00e1s extendido y ampliamente utilizado. Ejecutamos el siguiente comando: sudo apt-get install bind9 bind9utils bind9-doc","title":"Instalaci\u00f3n del servidor DNS"},{"location":"#configuracion-del-servidor","text":"En primer lugar le indicaremos al servidor que vamos a trabajar \u00fanicamente con IPv4, por lo que modificamos el archivo de configuraci\u00f3n 'named': sudo nano /etc/default/named Y la l\u00ednea que comienza por 'OPTIONS' debe quedar de la siguiente manera: OPTIONS=\"-u bind -4\"","title":"Configuraci\u00f3n del servidor"},{"location":"#configuracion-del-archivo-namedconfoptions","text":"Antes de modificar archivos de configuraci\u00f3n sensibles, realizamos una copia de seguridad con el comando: sudo cp /etc/bind/named.conf.options /etc/bind/named.conf.options.backup Ahora podemos modificarlo para que s\u00f3lo se puedan hacer consultas al servidor desde otras m\u00e1quinas de la red local. Para ello, a\u00f1adimos un bloque al principio del archivo tal que: acl confiables { 192.168.0.0/24; # Red local }; Y tambi\u00e9n comentamos la l\u00ednea que dice \"listen-on-v6 { any; };\", ya que s\u00f3lo vamos a trabajar con IPv4. Comprobamos que la configuraci\u00f3n es correcta con: sudo named-checkconf Reiniciamos y comprobamos el estado del servicio: sudo systemctl restart named sudo systemctl status named Si 'named-checkconf' no ha indicado ning\u00fan problema y el servicio se encuentra en ejecuci\u00f3n, podemos continuar.","title":"Configuraci\u00f3n del archivo 'named.conf.options'"},{"location":"#configuracion-del-archivo-namedconflocal","text":"Ejecutamos: sudo nano /etc/bind/named.conf.local Y, despu\u00e9s del texto comentado, incluimos un bloque tal que: zone \"deaw.es\" { type master; file \"/etc/bind/db.deaw.es\"; };","title":"Configuraci\u00f3n del archivo 'named.conf.local'"},{"location":"#creacion-del-archivo-de-zona","text":"Ahora crearemos el archivo con ruta y nombre que hemos indicado en el archivo de configuraci\u00f3n anterior. En este caso: sudo nano /etc/bind/db.deaw.es Y su contenido ser\u00e1: $TTL 604800 @ IN SOA debian.deaw.es admin.deaw.es ( 2025011601 ;Serial 3600 ;Refresh 1800 ;Retry 604800 ;Expire 86400 ;Minimum TTL ) IN NS debian.deaw.es. debian IN A 192.168.0.19","title":"Creaci\u00f3n del archivo de zona"},{"location":"#creacion-del-archivo-de-zona-para-resolucion-inversa","text":"Volvemos a modificar /etc/bind/named.conf.local y a\u00f1adimos: zone \"0.168.192.in-addr.arpa\" { type master; file \"/etc/bind/db.0.168.192\"; }; Y, al igual que en los pasos anteriores, creamos ese archivo con el contenido: $TTL 604800 @ IN SOA debian.deaw.es admin.deaw.es ( 2025011601 ;Serial 3600 ;Refresh 1800 ;Retry 604800 ;Expire 86400 ;Minimum TTL ) IN NS debian.deaw.es. X IN PTR debian","title":"Creaci\u00f3n del archivo de zona para resoluci\u00f3n inversa"},{"location":"#comprobacion-de-las-configuraciones","text":"Para asegurarnos de que las modificaciones y los archivos que hemos creado son correctos y que todo funciona correctamente, ejecutamos los siguientes comandos (en caso de que no haya problemas, indicar\u00e1n 'OK'. En otro caso, dar\u00e1n informaci\u00f3n sobre el problema encontrado):","title":"Comprobaci\u00f3n de las configuraciones"},{"location":"#cuestiones-finales","text":"\u00bfQu\u00e9 pasar\u00e1 si un cliente de una red diferente a la tuya intenta hacer uso de tu DNS de alguna manera, le funcionar\u00e1?\u00bfPor qu\u00e9, en qu\u00e9 parte de la configuraci\u00f3n puede verse? En el caso del servidor de esta pr\u00e1ctica, el cliente de otra red no podr\u00e1 acceder ya que en el archivo 'named.conf.options' indicamos que s\u00f3lo clientes de nuestra red local podr\u00e1n realizar peticiones a nuestro servidor DNS. \u00bfPor qu\u00e9 tenemos que permitir las consultas recursivas en la configuraci\u00f3n? Las consultas recursivas permiten que el servidor DNS resuelva nombres de dominio que no est\u00e1n directamente en su zona. Sin esta opci\u00f3n, el servidor solo responder\u00eda a consultas sobre dominios para los que es autoritativo y no buscar\u00eda informaci\u00f3n fuera de su base de datos, lo que limita su funcionalidad. El servidor DNS que acab\u00e1is de montar, \u00bfes autoritativo? \u00bfPor qu\u00e9? S\u00ed, ya que posee archivos de zona para un dominio espec\u00edfico. \u00bfD\u00f3nde podemos encontrar la directiva $ORIGIN y para qu\u00e9 sirve? Esta directiva se encuentra en los archivos de zona y sirve para que los registros puedan escribirse de manera relativa a esa directiva, sin necesidad de especificar el nombre de dominio completo en cada uno. \u00bfUna zona es id\u00e9ntico a un dominio? No, una zona no es id\u00e9ntica a un dominio, aunque est\u00e1n relacionados. Una zona es una porci\u00f3n de un dominio DNS que est\u00e1 bajo la administraci\u00f3n de un servidor DNS espec\u00edfico, y puede incluir varios subdominios. Un dominio, por otro lado, es un nombre en el sistema de nombres de dominio (DNS). \u00bfPueden editarse los archivos de zona de un servidor esclavo/secundario? No, los archivos de zona de un servidor esclavo no deben ser editados manualmente. Un servidor esclavo recibe sus archivos de zona del servidor primario (maestro) y se actualiza autom\u00e1ticamente con los cambios. \u00bfPor qu\u00e9 podr\u00eda querer tener m\u00e1s de un servidor esclavo para una misma zona? ener m\u00faltiples servidores esclavos mejora la fiabilidad y la disponibilidad del servicio DNS. Si uno de los servidores esclavos falla, otros pueden seguir proporcionando las respuestas. \u00bfCu\u00e1ntos servidores ra\u00edz existen? Existen 13 servidores ra\u00edz en el sistema DNS global. Estos servidores est\u00e1n distribuidos por todo el mundo y son responsables de redirigir las consultas DNS a los servidores de nombres autoritativos correspondientes. \u00bfQu\u00e9 es una consulta iterativa de referencia? Una consulta iterativa de referencia es un tipo de consulta DNS en la que, si un servidor DNS no tiene la respuesta a la consulta, devuelve la direcci\u00f3n de otro servidor DNS que podr\u00eda tener la respuesta. El cliente luego consulta este servidor y repite el proceso hasta que se encuentra la respuesta. En una resoluci\u00f3n inversa, \u00bfa qu\u00e9 nombre se mapear\u00eda la direcci\u00f3n IP 172.16.34.56? En una resoluci\u00f3n inversa, la direcci\u00f3n IP 172.16.34.56 se mapear\u00eda al nombre 56.34.16.172.in-addr.arpa. Esto se debe a que en las consultas inversas, las direcciones IP se invierten y se a\u00f1aden al dominio especial in-addr.arpa.","title":"Cuestiones finales"}]}